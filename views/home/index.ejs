<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>首页</title>
    <meta name="description" class="description"  content="">
    <meta name="keywords" class="keywords"  content="">
    <link rel="stylesheet" href="/home/css/bootstrap.min.css">
    <link rel="stylesheet" href="/home/css/style.css">
    <link rel="stylesheet" href="/home/css/animate.min.css">
    <link rel="icon" href="/home/img/favicon.png" type="image/x-icon" />
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="/home/js/bootstrap.min.js"></script>
    <script src="/home/js/move.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <script src="/home/js/sucaijiayuan.js"></script>
    <style>
        .item-title{
            overflow: hidden;
            text-overflow:ellipsis;
            white-space: nowrap;
        }
        #box{width:100%;height:320px; position:relative; margin:0 auto; overflow:hidden;}
        #ul{ width:100%; position:absolute;left:0; top:0; z-index:1;}
        #ul li{width:100%; position:absolute; top:0;}
        #ol{z-index:2; width:220px; position:absolute;right:10px; bottom:10px;}
        #ol li{ width:20px;height:20px; float:left;margin:0 2px; display:inline; background:#fff; color:#f60; line-height:20px; text-align:center;}
        #ol .active{ background:#f60; color:#fff;}
        .lun_title{
            position:absolute;
            top:220px;
            left:50px;
            color:#fff;
            font-size:24px;
        }
        #ul li img{
            width:100%;
            height:320px;
        }
        .lun_con{
            padding-left: 0px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row con-nav">
            <div class="col-lg-3 col-md-3 col-sm-4">
                <a class="logo hidden-xs animated fadeInDownBig" href="/">
                    <img src="/home/img/logo.gif" alt="前端资讯-谷建文博客">
                </a>
            </div>
            <div class="col-lg-9 col-md-9 col-sm-8">
                <nav class="navbar navbar-default col-lg-12 ous-nav">
                    <div class="container-fluid">
                        <!-- Brand and toggle get grouped for better mobile display -->
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                <span class="sr-only">Toggle navigation</span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </button>
                            <a class="navbar-brand hidden-lg hidden-md hidden-sm" style="color: #fff;" href="#">谷建文个人博客</a>
                        </div>

                        <!-- Collect the nav links, forms, and other content for toggling -->
                        <div class="collapse navbar-collapse ous-nav-lin" id="bs-example-navbar-collapse-1">
                            <ul class="nav navbar-nav ous-nav-font">
                               <!--  <li><a href="/">首页</a></li>
                                <li><a href="#">心情</a></li>
                                <li><a href="#">WEB开发</a></li>
                                <li><a href="#">node</a></li>
                                <li><a href="#">javascript</a></li>
                                <li><a href="#">Vue2.0</a></li> -->
                            </ul>
                        </div><!-- /.navbar-collapse -->
                    </div><!-- /.container-fluid -->
                </nav>
            </div>
        </div>
        <div class="row">
            <!--左侧开始-->
            <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12 animated rollIn">
                <!--轮播图开始-->
                <div class="padding0 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div id="box">
                        <ul id="ul" class="lun_con">
                            <!-- <a href="">
                                <li>
                                    <img src="images/1.jpg" alt=""/>
                                    <span class="lun_title">321312343222222222222222222222222222</span>
                                </li>
                            </a> -->
                        </ul>
                        <ol id="ol">
                            <li class="active">1</li>
                            <li>2</li>
                            <li>3</li>
                            <li>4</li>
                            <li>5</li>
                        </ol>
                    </div>
                </div>
                <!--轮播图结束-->
                <div class="padding0 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="con-title">推荐文章</div>
                </div>
                <div class="padding0 col-lg-12 col-md-12 col-sm-12 col-xs-12 con">
                    <!-- <div class="col-sm-6 col-md-6 col-lg-6">
                        <div class="thumbnail item-img">
                            <img src="/home/img/a1.jpg" alt="...">
                            <div class="caption">
                                <h3 class="item-title">这是文章标题？</h3>
                                <div class="item-icon pull-right">
                                    <span class="glyphicon glyphicon-dashboard"></span>
                                    <span>2017-5-20</span>
                                </div>
                                <div class="item-icon pull-right hidden-xs hidden-sm">
                                    <span class="glyphicon glyphicon-heart-empty"></span>
                                    <span>浏览(456)</span>
                                </div>
                                <a href="#" class="btn btn-success" role="button">查看全文</a>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
            <!--左侧结束-->
            <!--右侧开始-->
            <div class="col-lg-4 col-md-4 col-sm-4 hidden-xs hidden-sm">
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm animated rotateIn">
                    <div class="con-right-title">搜索</div>
                    <form class="navbar-form center col-lg-12 col-sm-12 col-md-12">
                        <div class="form-group">
                            <input type="text" class="form-control search_con" placeholder="请输入关键字">
                        </div>
                        <span type="submit" class="btn btn-info search_click">搜索</span>
                    </form>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm animated rotateIn">
                    <div class="con-right-title">关注我</div>
                    <div class="gzwm">
                        <ul class="right-top">
                            <li class="col-lg-3 col-md-3 col-sm-3 guanzhu-right-icon"><a class="xlwb" href="#" target="_blank">新浪</a></li>
                            <li class="col-lg-3 col-md-3 col-sm-3 guanzhu-right-icon"><a class="txwb" href="#" target="_blank">腾讯</a></li>
                            <li class="col-lg-3 col-md-3 col-sm-3 guanzhu-right-icon"><a class="rss" href="portal.php?mod=rss" target="_blank">RSS</a></li>
                            <li class="col-lg-3 col-md-3 col-sm-3 guanzhu-right-icon"><a class="wx" href="mailto:admin@admin.com">邮箱</a></li>
                        </ul>
                    </div>
                    <!--tit01 end-->
                    <div class="col-lg-12 right-top-img">
                        <img src="/home/img/info.png">
                        <div id="showStr"></div> <!--用来显示逐渐出现的文字-->
                        <div style="display:none" id="string">从不羡慕别人的优秀，因为相信自己也可以优秀。闲下来时看看书，书本里的故事，总有你学到的人生。 --blog 谷建文
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm animated fadeInUpBig">
                    <div class="con-right-title">标签云</div>
                    <div class="cloud">
                        <ul>
                            <li><a href="/tag/心情">心情</a></li>
                            <li><a href="/tag/html">HTML</a></li>
                            <li><a href="/">前端设计</a></li>
                            <li><a href="/">Html</a></li>
                            <li><a href="/">CSS3</a></li>
                            <li><a href="/">Html5+css3</a></li>
                            <li><a href="/">百度</a></li>
                            <li><a href="/">Javasript</a></li>
                            <li><a href="/">web开发</a></li>
                            <li><a href="/">前端设计</a></li>
                            <li><a href="/">Html</a></li>
                            <li><a href="/">CSS3</a></li>
                            <li><a href="/">Html5+css3</a></li>
                            <li><a href="/">百度</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm animated fadeInDownBig">
                    <div class="ad">
                        <!-- <a href="">
                            <img src="/home/images/03.jpg">
                        </a> -->
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm animated rotateIn">
                    <div class="con-right-title">统计表</div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-md-offset-2 col-lg-offset-2 col-sm-offset-2 tongji">
                        <button type="button" class="btn btn-primary col-lg-5 col-sm-5 col-md-5 pull-left">文章<span>(11)</span></button>
                        <button type="button" class="btn btn-success col-lg-5 col-sm-5 col-md-5 pull-right">留言<span>(11)</span></button>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-md-offset-2 col-lg-offset-2 col-sm-offset-2 tongji">
                        <button type="button" class="btn btn-danger col-lg-5 col-sm-5 col-md-5 pull-left">评论<span>(11)</span></button>
                        <button type="button" class="btn btn-info col-lg-5 col-sm-5 col-md-5 pull-right">访客<span>(11)</span></button>
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8 col-md-offset-2 col-lg-offset-2 col-sm-offset-2 tongji">
                        <button type="button" class="btn btn-default col-lg-12 col-sm-12 col-md-12">网站稳定运行<span>520天</span></button>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 hidden-xs hidden-sm">
                    <div class="links">
                        <h3><span>[<a href="javascript:;" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">申请友情链接</a>]</span>友情链接</h3>
                        <ul class="link">
                            <!-- <li><a href="/">谷建文个人博客</a></li> -->
                        </ul>
                    </div>
                </div>
            </div>
            <!--右侧结束-->
        </div>
    </div>
    <!--底部-->
    <div id="footer" class="">
        <p class="center-block">谷建文博客 Design by DanceSmile 蜀ICP备11002373号-1</p>
    </div>
    <!--返回顶部-->
    <div style="display: none;" id="rocket-to-top">
        <div style="opacity:0;display: block;" class="level-2"></div>
        <div class="level-3"></div>
    </div>
    <!--返回顶部结束-->
    <!--申请友情链接的模态框-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="exampleModalLabel">友情链接申请</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="recipient-name" class="control-label">网站名称</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="form-group">
                            <label for="recipient-name" class="control-label">联系方式</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="form-group">
                            <label for="recipient-name" class="control-label">网站地址</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="form-group">
                            <label for="message-text" class="control-label">网站简介</label>
                            <textarea class="form-control" id="message-text"></textarea>
                        </div>
                        <div class="alert alert-danger" role="alert">
                            <a href="#" class="alert-link">只接受相同类型的网站</a>
                        </div>
                        <button type="button" class="btn btn-info btn-lg btn-block">提交</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal">取消</button>
                </div>
            </div>
        </div>
    </div>
    <!--end-->
    <script src="/home/js/sucaijiayuan.js"></script>
    <script src="/home/js/index.js"></script>
</body>
    <script>
    // 轮播图
        var htmllun = ' <a href="/details/{0}">'
                    +'<li>'
                    +'<img src="{1}" alt="{2}"/>'
                    +'<span class="lun_title">{2}</span>'
                    +'</li>'
                    +'</a>';

        $.ajax({
                type: 'GET',
                url: '/api/top',
                data: null,
                success: function(data){
                    // console.log(data)
                    for(var i= 0,str="";i<data.length;i++){
                     var datas = [
                            data[i]._id,
                            data[i].imgurl,
                            data[i].tname,
                        ];
                        str += replaceString(htmllun,datas);
                    }

                    $(".lun_con").html(str);
                    //  轮播图
                    var oUl = document.getElementById('ul');
                    var aLiUl = oUl.getElementsByTagName('li');
                    
                    var oOl = document.getElementById('ol');
                    var aLiOl = oOl.getElementsByTagName('li');
                    
                    var oneWidth = aLiUl[0].offsetWidth;
                    var iNow = 0;
                    var bBtn = true;
                    
                    for(var i=1;i<aLiUl.length;i++){
                        aLiUl[i].style.left = oneWidth + 'px';
                    }
                    
                    
                    for(var i=0;i<aLiOl.length;i++){
                        aLiOl[i].index = i;
                        aLiOl[i].onmouseover = function(){
                            
                            if(bBtn){
                                bBtn = false;
                            for(var i=0;i<aLiOl.length;i++){
                                aLiOl[i].className = '';
                            }
                            this.className = 'active';
                            
                            if(iNow < this.index){
                                aLiUl[this.index].style.left = oneWidth + 'px';
                                startMove( aLiUl[iNow] , { left : - oneWidth } );
                            }
                            else if(iNow > this.index){
                                aLiUl[this.index].style.left = - oneWidth + 'px';
                                startMove( aLiUl[iNow] , { left :  oneWidth } );
                            }
                            
                            startMove( aLiUl[this.index] ,{ left : 0 },function(){
                                bBtn = true;
                                
                            } );
                            iNow = this.index;
                            
                            }
                            
                        };
                    }
                }
            });
        // 首页推荐
        var htmltuijie = '<div class="col-sm-6 col-md-6 col-lg-6">'
                        +'<div class="thumbnail item-img">'
                        +'<img src="{1}" alt="{2}">'
                        +'<div class="caption">'
                        +'<h3 class="item-title">{2}</h3>'
                        +'<div class="item-icon pull-right">'
                        +'<span class="glyphicon glyphicon-dashboard"></span>'
                        +'<span>{3}</span>'
                        +'</div>'
                        +'<div class="item-icon pull-right hidden-xs hidden-sm">'
                        +'<span class="">云标签：</span>'
                        +'<span>{4}</span>'
                        +'</div>'
                        +'<a href="/details/{0}" class="btn btn-success" role="button">查看全文</a>'
                        +'</div>'
                        +'</div>'
                        +'</div>';
        $.ajax({
                type: 'GET',
                url: '/api/show',
                data: null,
                success: function(data){
                    // console.log(data)
                    for(var i= 0,str="";i<data.length;i++){
                     var datas = [
                            data[i]._id,
                            data[i].imgurl,
                            data[i].tname,
                            data[i].time,
                            data[i].tag
                        ];
                        str += replaceString(htmltuijie,datas);
                    }

                    $(".con").html(str);
                }
            });
        // 每日一语
        $.ajax({
                type: 'GET',
                url: '/api/new',
                data: null,
                success: function(data){
                    // console.log(data)
                    // 自动输入
                        var index = 0;
                        var str = data.newcontent;
                        function type() {
                            // console.log(index)
                            if(index == str.length) {
                                index = 0;
                            }
                            document.getElementById("showStr").innerText = str.substring(0, index++);
                        }
                        setInterval(type, 200); //通过定时器来让文字逐步显示
                }
            });

         // 友情链接
         var htmllink = '<li><a href="{1}" target="_blank">{2}</a></li>'
        $.ajax({
                type: 'GET',
                url: '/api/linklist',
                data: null,
                success: function(data){
                    // console.log(data)
                   for(var i= 0,str="";i<data.length;i++){
                     var datas = [
                            data[i]._id,
                            data[i].linkurl,
                            data[i].linkname
                        ];
                        str += replaceString(htmllink,datas);
                    }

                    $(".link").html(str);
                }
            });

        //广告接口
        $.ajax({
                type: 'GET',
                url: '/api/addlist',
                data: null,
                success: function(data){
                    // console.log(data)
                        var htmladd = '<a href="'+data.addurl+'" target="_blank">'
                    +'<img src="'+data.addimgurl+'">'
                    +'</a>';
                    $('.ad').html(htmladd);
                }
            });

        //导航分类接口
        var navhtml = '<li><a href="/list/{0}/page/1">{1}</a></li>'
        var navhome = '<li><a href="/">首页</a></li>'

        $.ajax({
                type: 'GET',
                url: '/api/catelist',
                data: null,
                success: function(data){
                    console.log(data)
                    for(var i= 0,str="";i<data.length;i++){
                     var datas = [
                            data[i]._id,
                            data[i].catename,
                        ];
                        str += replaceString(navhtml,datas);
                    }

                    $(".nav").html(navhome+str);
                } 
            });
        // 获取seo优化
         // $.ajax({
         //        type: 'GET',
         //        url: '/api/seo',
         //        data: null,
         //        success: function(data){
         //            // console.log(data)
         //            document.title = data.seoname;
         //            $("head").append('<meta name="description" class="description"  content="'+data.seodel+'">');
         //            $("head").append('<meta name="keywords" class="keywords"  content="'+data.seokey+'">');

         //        } 
         //    });
        // 字符串函数
        function replaceString(string, datas) {
            var str = string;
            for (var i = 0; i < datas.length; i++) {
                var regExp = new RegExp("\\{" + i + "\\}", "g");
                str = str.replace(regExp, datas[i]);

            }
            return str;
        }
        // 搜索
        $('.search_click').click(function(){
            if($('.search_con').val().length==0){
                alert('请输入您的关键字');
            }else{
                var cc = $('.search_con').val();
                window.location.href = '/search/'+cc;
                console.log(cc)
            }
        });
    </script>
</html>